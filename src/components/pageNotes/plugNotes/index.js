import { useEffect, useState } from "react";
import { BackEmoji } from "../../assets/emoji/back";
import style from "./style.module.scss";
import { useLocation, useNavigate } from "react-router-dom";

const mopiks = [
    {
        _id: "1",
        text: `<img src="./assets/main/tishka-bala1.png" alt="https://t.me/atom_baytovich"></img> 1. –ü—Ä–∏–≤–µ—Ç!! –≠—Ç–æ –ø—Ä–æ–µ–∫—Ç –ö–æ–º–ø–∏–∫ –¢–∏—à–∫–∏. \n\n–î–∞, –æ–Ω —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è. –ü—Ä–∏–¥—É–º–∞–ª –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª –µ–≥–æ –í–æ–≤–∞, –∞ –µ–≥–æ –ª—é–±–∏–º–∞—è –ø–æ–ª–æ–≤–∏–Ω–∫–∞ –ê–Ω—è –ø–æ–º–æ–≥–∞–ª–∞ –µ–º—É —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏ (—ç—Ç–æ –æ–Ω–∞ —Ä–∏—Å–æ–≤–∞–ª–∞) :)\n\n–ß—Ç–æ –∑–∞ –ø—Ä–æ–µ–∫—Ç? –ü—Ä–æ–µ–∫—Ç, —á—Ç–æ–±—ã –¥–µ–ª–∏—Ç—Å—è —Å–≤–æ–∏–º–∏ —á—É–≤—Å—Ç–≤–∞–º–∏, —ç–º–æ—Ü–∏—è–º–∏, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º —á—Ç–æ–±—ã –Ω–∏–∫—Ç–æ –Ω–µ –∑–Ω–∞–ª –∫—Ç–æ —Ç—ã, —á—Ç–æ —Ç—ã –∏ –ø–æ—á–µ–º—É —Ç—ã. \n–¢—ã –Ω–µ–º–æ. –Ø –Ω–µ–º–æ. 
        <a href="/?id=2" style="color: burlywood;">–°–º.–¥–∞–ª—å—à–µ</a>`,
        desc: `1. –ü—Ä–∏–≤–µ—Ç!! –≠—Ç–æ –ø—Ä–æ–µ–∫—Ç –ö–æ–º–ø–∏–∫ –¢–∏—à–∫–∏. \n\n–î–∞, –æ–Ω —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è. –ü—Ä–∏–¥—É–º–∞–ª –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª –µ–≥–æ –í–æ–≤–∞, –∞ –µ–≥–æ –ª—é–±–∏–º–∞—è –ø–æ–ª–æ–≤–∏–Ω–∫–∞ –ê–Ω—è –ø–æ–º–æ–≥–∞–ª–∞ –µ–º—É —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏ (—ç—Ç–æ –æ–Ω–∞ —Ä–∏—Å–æ–≤–∞–ª–∞) :)\n\n–ß—Ç–æ –∑–∞ –ø—Ä–æ–µ–∫—Ç? –ü—Ä–æ–µ–∫—Ç, —á—Ç–æ–±—ã –¥–µ–ª–∏—Ç—Å—è —Å–≤–æ–∏–º–∏ —á—É–≤—Å—Ç–≤–∞–º–∏, —ç–º–æ—Ü–∏—è–º–∏, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º —á—Ç–æ–±—ã –Ω–∏–∫—Ç–æ –Ω–µ –∑–Ω–∞–ª –∫—Ç–æ —Ç—ã, —á—Ç–æ —Ç—ã –∏ –ø–æ—á–µ–º—É —Ç—ã. \n–¢—ã –Ω–µ–º–æ. –Ø –Ω–µ–º–æ.`
    },
    {
        _id: "2",
        text: `<img src="./assets/main/tishka-bala2.png" alt="https://t.me/atom_baytovich"></img> 2. –û –¥–∞... –í—Ç–æ—Ä–æ–π –ø—É–Ω–∫—Ç... –¢—ã –µ—â—ë —á–∏—Ç–∞–µ—à—å? –ú–æ–ª–æ–¥–µ—Ü\n\n–ó–Ω–∞—á–∏—Ç —Ç–µ–±—è –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–ª –ø—Ä–æ–µ–∫—Ç. –ï—Å–ª–∏ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ç–∞–∫, —Ç–æ —è –æ—á–µ–Ω—å —Ä–∞–¥)\n\n–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ, –∫–æ–≥–¥–∞ –∞–≤—Ç–æ—Ä–∏–∑—É–µ—à—å—Å—è, —Ç—ã —Å–º–æ–∂–µ—à—å –ø–∏—Å–∞—Ç—å –≤—Å—ë —á—Ç–æ —Ç–µ–±—è –≤–∑–¥—É–º–∞–µ—Ç—Å—è (–∫—Ä–æ–º–µ –ø—Ä–∞–≤–∏–ª, –∫–æ—Ç–æ—Ä—ã–µ —á—Ç–æ-—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç)
        \n<a href="/?id=3" style="color: burlywood;">–°–º.–¥–∞–ª—å—à–µ</a>`,
        desc: `2. –û –¥–∞... –í—Ç–æ—Ä–æ–π –ø—É–Ω–∫—Ç... –¢—ã –µ—â—ë —á–∏—Ç–∞–µ—à—å? –ú–æ–ª–æ–¥–µ—Ü\n\n–ó–Ω–∞—á–∏—Ç —Ç–µ–±—è –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–ª –ø—Ä–æ–µ–∫—Ç. –ï—Å–ª–∏ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ç–∞–∫, —Ç–æ —è –æ—á–µ–Ω—å —Ä–∞–¥)\n\–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ, –∫–æ–≥–¥–∞ –∞–≤—Ç–æ—Ä–∏–∑—É–µ—à—å—Å—è, —Ç—ã —Å–º–æ–∂–µ—à—å –ø–∏—Å–∞—Ç—å –≤—Å—ë —á—Ç–æ —Ç–µ–±—è –≤–∑–¥—É–º–∞–µ—Ç—Å—è (–∫—Ä–æ–º–µ –ø—Ä–∞–≤–∏–ª, –∫–æ—Ç–æ—Ä—ã–µ —á—Ç–æ-—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç)`
    },
    {
        _id: "3",
        text: `<img src="./assets/main/tishka-bala3.png" alt="https://t.me/atom_baytovich"></img> 3. –ü—Ä–æ—Å—Ç–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è –∑–¥–µ—Å—å –∏ –Ω–∞—á–Ω–∏ –ø–∏—Å–∞—Ç—å. –í—Å–µ –±—É–¥—É—Ç –≤–∏–¥–µ—Ç—å —Ç–≤–æ–∏ –º—ã—Å–ª–∏, –∂–µ–ª–∞–Ω–∏—è, –Ω–æ –Ω–∏–∫—Ç–æ –Ω–µ –±—É–¥–µ—Ç –∑–Ω–∞—Ç—å –∫—Ç–æ —Ç—ã. \n\n–Ø —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–µ–ª–∞–ª –ø—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–Ω–æ–Ω–∏–º–Ω—ã–º –∏ –Ω–∏–∫–∞–∫–∏–µ —Ç–≤–æ–∏ –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ —Ç–µ–±—è, –Ω–µ —Ö—Ä–∞–Ω—é —É —Å–µ–±—è.
        \n<a href="/?id=4" style="color: burlywood;">–°–º.–¥–∞–ª—å—à–µ</a>`,
        desc: `3. –ü—Ä–æ—Å—Ç–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è –∑–¥–µ—Å—å –∏ –Ω–∞—á–Ω–∏ –ø–∏—Å–∞—Ç—å. –í—Å–µ –±—É–¥—É—Ç –≤–∏–¥–µ—Ç—å —Ç–≤–æ–∏ –º—ã—Å–ª–∏, –∂–µ–ª–∞–Ω–∏—è, –Ω–æ –Ω–∏–∫—Ç–æ –Ω–µ –±—É–¥–µ—Ç –∑–Ω–∞—Ç—å –∫—Ç–æ —Ç—ã. \n\n–Ø —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–µ–ª–∞–ª –ø—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–Ω–æ–Ω–∏–º–Ω—ã–º –∏ –Ω–∏–∫–∞–∫–∏–µ —Ç–≤–æ–∏ –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ —Ç–µ–±—è, –Ω–µ —Ö—Ä–∞–Ω—é —É —Å–µ–±—è.`
    },
    {
        _id: "4",
        text: `4. –ö—Ç–æ —Ç–∞–∫–æ–π –Ω–µ–º–æ? - –∑–¥–µ—Å—å —ç—Ç–æ —Ç—ã.\n\n–ù–µ–º–æ - –≤—ã–º—ã—à–ª–µ–Ω–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂ –∏–∑ —Ä–æ–º–∞–Ω–∞ "–î–≤–∞–¥—Ü–∞—Ç—å —Ç—ã—Å—è—á –ª—å–µ –ø–æ–¥ –≤–æ–¥–æ–π" –ñ—é–ª—è –í–µ—Ä–Ω–∞ üôÉ. \n\n –≠—Ç–æ –Ω–µ–æ–ø–æ–∑–Ω–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç, —á–µ–ª–æ–≤–µ–∫ –±–µ–∑ –∏–º–µ–Ω–∏, –ø—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è —Å–∫—Ä—ã—Ç–Ω–∞—è –ª–∏—á–Ω–æ—Å—Ç—å. \n\n –ù—É –≤—Å—ë, –¥–∞–≤–∞–π —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è –≤ –∫–Ω–æ–ø–∫–µ –ê–∫–∫–∞—É–Ω—Ç –∏ –ø–∏—à–∏ —Ç—É–¥–∞ —Å–≤–æ–∏ –º—ã—Å–ª–∏ 
        \n<a href="/auth" style="color: burlywood;">–ù–∞–∂–º–∏, —á—Ç–æ–±—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è</a>
        `,
        desc: `4. –ö—Ç–æ —Ç–∞–∫–æ–π –Ω–µ–º–æ? - –∑–¥–µ—Å—å —ç—Ç–æ —Ç—ã.\n\n–ù–µ–º–æ - –≤—ã–º—ã—à–ª–µ–Ω–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂ –∏–∑ —Ä–æ–º–∞–Ω–∞ "–î–≤–∞–¥—Ü–∞—Ç—å —Ç—ã—Å—è—á –ª—å–µ –ø–æ–¥ –≤–æ–¥–æ–π" –ñ—é–ª—è –í–µ—Ä–Ω–∞ üôÉ. \n\n –≠—Ç–æ –Ω–µ–æ–ø–æ–∑–Ω–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç, —á–µ–ª–æ–≤–µ–∫ –±–µ–∑ –∏–º–µ–Ω–∏, –ø—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è —Å–∫—Ä—ã—Ç–Ω–∞—è –ª–∏—á–Ω–æ—Å—Ç—å. \n\n –ù—É –≤—Å—ë, –¥–∞–≤–∞–π —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è –≤ –∫–Ω–æ–ø–∫–µ –ê–∫–∫–∞—É–Ω—Ç –∏ –ø–∏—à–∏ —Ç—É–¥–∞ —Å–≤–æ–∏ –º—ã—Å–ª–∏`
    },
]

const CardNotes = ({
    id,
    text,
    onClick
}) => {
    return (
        <div className={style.cardNotes} id={id} onClick={() => onClick(id)}>
            <p>{text}</p>
        </div>
    )
}

export const PlugNotes = () => {
    const navigate = useNavigate();
    const location = useLocation();
    const [openWrite, setOpenWrite] = useState(false);
    const [dataWrite, setDataWrite] = useState({
        id: undefined,
        text: ""
    })
    const openWriteFunc = (id) => {
        const mopik = mopiks.find(el => el._id == id);
        if (!mopik) {
            setOpenWrite(false);
            setDataWrite({
                id: undefined,
                text: ""
            })
            return;
        }
        setDataWrite({
            id,
            text: mopik.text
        });
        setOpenWrite(true);
    }

    const closeWrite = () => {
        setOpenWrite(false);
        setDataWrite({
            id: undefined,
            text: ""
        })
        navigate('')
    }

    useEffect(() => {
        if (openWrite && location.search == "") {
            setOpenWrite(false);
            setDataWrite({
                id: undefined,
                text: ""
            })
            return;
        }
        if (location.search == "") return;
        const queryParams = new URLSearchParams(location.search);
        const id = queryParams.get("id");
        openWriteFunc(id)
    }, [location.search]);
    return (
        <div className={style.notes}>
            {(openWrite == true) && (
                <div className={`${style.notSee}`}>
                    <div onClick={() => closeWrite()} className={style.back}>
                        <BackEmoji />
                    </div>
                </div>
            )}

            {(openWrite == false) &&
                <div className={`${style.see} ${style.element}`} >
                    <div className={style.lvl} id="foo" >
                        <div className={style.lvl_ru}><p>–†–∞–∑–¥–µ–ª</p><p>–±–ª–æ–∫–Ω–æ—Ç</p></div>
                    </div>
                    <div className={style.list} >
                        {mopiks.map((el) =>
                            <CardNotes
                                id={el._id}
                                onClick={() => navigate(`?id=${el._id}`)}
                                text={el.desc}
                                key={el._id}

                            />
                        )}
                    </div >
                </div>
            }
            {openWrite == true &&
                <div className={style.write}>
                    <div className={style.textareaElement} dangerouslySetInnerHTML={{ __html: dataWrite.text }}>
                    </div>
                </div>
            }
        </div>
    )
}